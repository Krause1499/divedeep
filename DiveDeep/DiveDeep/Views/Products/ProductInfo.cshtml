@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    string title = "";
    if (Model is Regulator)
    {
        title = "Regulator";
    }
    else if (Model is OxygenTank)
    {
        title = "Tank";
    }
    else
        title = Model.Model;
    ViewData["Title"] = $"{Model.Brand} {title}";
}

<style>
    .product-image {
        max-height: 400px;
        object-fit: cover;
    }

    .thumbnail {
        width: 80px;
        height: 80px;
        object-fit: cover;
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 0.3s ease;
    }

        .thumbnail:hover, .thumbnail.active {
            opacity: 1;
        }</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<div class="container mt-5">
    <div class="row">
        <!-- Product Images -->
        <div class="col-md-6 mb-4">
            <img src="@Url.Content(Model.FilePath)" alt="Product" class="img-fluid rounded mb-3 product-image" id="mainImage">
            <div class="d-flex justify-content-between">
            </div>
        </div>

        <!-- Product Details -->
        <div class="col-md-6">
            <h2 class="mb-1">@title</h2>
            <p class="text-muted mb-3">@Model.Brand</p>
            <div class="mb-3">
                <span class="h4 mb-3">@Model.Price kr. pr. dag</span>
                @*<span class="text-muted"><s>$399.99</s></span> *@
            </div>
            @*<div class="mb-3">
                <i class="bi bi-star-fill text-warning"></i>
                <i class="bi bi-star-fill text-warning"></i>
                <i class="bi bi-star-fill text-warning"></i>
                <i class="bi bi-star-fill text-warning"></i>
                <i class="bi bi-star-half text-warning"></i>
                <span class="ms-2">4.5 (120 reviews)</span>
            </div> *@
            <p class="mb-3">
                Ghost af Scubapro er designet til at give dig en optimal snorkeloplevelse.
                Med sin ergonomiske form og højkvalitetsmaterialer sikrer den komfort og holdbarhed under dine dyk.
                Perfekt til både begyndere og erfarne snorklere.
            </p>
            @if (Model is Fin || Model is DivingSuit)
            {
                <div class="mb-4">
                    <h5>Vælg størrelse:</h5>
                    <div class="btn-group" role="group" aria-label="Valg af størrelse">
                        <input type="radio" class="btn-check" name="størrelse" id="XS" autocomplete="off">
                        <label class="btn btn-outline-primary" for="XS">XS</label>
                        <input type="radio" class="btn-check" name="størrelse" id="S" autocomplete="off">
                        <label class="btn btn-outline-primary" for="S">S</label>
                        <input type="radio" class="btn-check" name="størrelse" id="M" autocomplete="off">
                        <label class="btn btn-outline-primary" for="M">M</label>
                        <input type="radio" class="btn-check" name="størrelse" id="L" autocomplete="off">
                        <label class="btn btn-outline-primary" for="L">L</label>
                        <input type="radio" class="btn-check" name="størrelse" id="XL" autocomplete="off">
                        <label class="btn btn-outline-primary" for="XL">XL</label>
                    </div>
                </div>
            }
            @if (Model is BCD)
            {
                <div class="mb-4">
                    <h5>Vælg størrelse:</h5>
                    <div class="btn-group" role="group" aria-label="Valg af størrelse">
                        <input type="radio" class="btn-check" name="størrelse" id="S" autocomplete="off">
                        <label class="btn btn-outline-primary" for="S">S</label>
                        <input type="radio" class="btn-check" name="størrelse" id="M" autocomplete="off">
                        <label class="btn btn-outline-primary" for="M">M</label>
                        <input type="radio" class="btn-check" name="størrelse" id="L" autocomplete="off">
                        <label class="btn btn-outline-primary" for="L">L</label>
                    </div>
                </div>
            }
            @if (Model is DivingSuit)
            {
                <div class="mb-4">
                    <h5>Vælg køn:</h5>
                    <div class="btn-group" role="group" aria-label="Valg af køn">
                        <input type="radio" class="btn-check" name="mand" id="Mand" autocomplete="off">
                        <label class="btn btn-outline-primary" for="Mand">Mand</label>
                        <input type="radio" class="btn-check" name="køn" id="Kvinde" autocomplete="off">
                        <label class="btn btn-outline-primary" for="Kvinde">Kvinde</label>
                    </div>
                </div>
            }
            <div class="mb-3">
                <label for="quantity" class="form-label">Antal:</label>
                <input type="number" class="form-control" id="quantity" value="1" min="1" style="width: 80px;">
            </div>

            <div class="mb-3">
                <label for="startDate">Startdato:</label>
                <input id="startDate" name="StartDate" class="form-control mb-1" type="date" />
                <label for="endDate">Slutdato:</label>
                <input id="endDate" name="EndDate" class="form-control" type="date" disabled="disabled" />

                <script>
                    const startInput = document.getElementById('startDate');
                    const endInput = document.getElementById('endDate');

                    const today = new Date();
                    const yyyy = today.getFullYear();
                    const mm = String(today.getMonth() + 1).padStart(2, '0');
                    const dd = String(today.getDate()).padStart(2, '0');
                    startInput.min = `${yyyy}-${mm}-${dd}`;

                    startInput.addEventListener('change', function () {
                        if (!this.value) return;

                        // Lav en ny dato ud fra startdatoen
                        const startDate = new Date(this.value);
                        // Læg 1 dag til
                        startDate.setDate(startDate.getDate() + 1);

                        // Konverter til YYYY-MM-DD format (krævet af <input type="date">)
                        const minEndDate = startDate.toISOString().split('T')[0];

                        // Sæt min-værdien på slutdato
                        endInput.min = minEndDate;

                        // Hvis der allerede er valgt en ugyldig slutdato, nulstil den
                        if (endInput.value && endInput.value < minEndDate) {
                            endInput.value = "";
                        }
                        endInput.disabled = false;
                    });
                </script>
            </div>

            <button class="datepicker btn btn-primary btn-lg mb-3 me-2">
                <i class="bi bi-cart-plus"></i> Tilføj til kurv
            </button>
            <button class="btn btn-outline-secondary btn-lg mb-3">
                <i class="bi bi-heart"></i> Tilføj til ønskeliste
            </button>
            @*<div class="mt-4">
                <h5>Key Features:</h5>
                <ul>
                    <li>Industry-leading noise cancellation</li>
                    <li>30-hour battery life</li>
                    <li>Touch sensor controls</li>
                    <li>Speak-to-chat technology</li>
                </ul>
            </div>*@
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function changeImage(event, src) {
            document.getElementById('mainImage').src = src;
            document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
            event.target.classList.add('active');
        }
</script>
