@{
    ViewData["Title"] = $"{Model.Product.Brand}";
}
@model ProductDetailsViewModel

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/da.js"></script>
<div class="container mt-5">
    <div class="row">
        <!-- Product Images -->
        <div class="col-md-6 mb-4">
            <img src="@Url.Content(Model.Product.FilePath)" alt="Product" class="img-fluid rounded mb-3 product-image" id="mainImage">
            <div class="d-flex justify-content-between">
            </div>
        </div>

        <!-- Product Details -->
        <div class="col-md-6">
            <h2 class="mb-1">@Model.Product.Brand</h2>
            <p class="text-muted mb-3">@Model.Product.Brand</p>
            <div class="mb-3">
                <span class="h4 mb-3">@Model.Product.DailyPrice kr. pr. dag</span>
            </div>
            <p class="mb-3">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Aliquam sollicitudin augue eget est fringilla, nec feugiat ex venenatis. Maecenas ac velit eros.
                Aliquam congue mauris elit, vitae tempus ante rutrum.
            </p>

            <form asp-controller="Order" asp-action="Add" method="post" class="mt-3">
                 <input type="hidden" asp-for="Product.Id" /> 

                <div class="text-danger" asp-validation-summary="All"></div>

                @if (Model.Product.ProductType is ProductType.Fins)
                {
                    <div class="mb-4">
                        <h5>Vælg størrelse:</h5>
                        <div class="btn-group" role="group" aria-label="Valg af størrelse">

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.XS" id="size-XS" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-XS">XS</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.S" id="size-S" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-S">S</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.M" id="size-M" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-M">M</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.L" id="size-L" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-L">L</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.XL" id="size-XL" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-XL">XL</label>

                        </div>
                        <span class="text-danger ms-2" asp-validation-for="Size"></span>
                    </div>
                }
                @if (Model.Product.ProductType is ProductType.DivingSuit)
                {
                    <div class="mb-4">
                        <h5>Vælg størrelse:</h5>
                        <div class="btn-group" role="group" aria-label="Valg af størrelse">

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.XS" id="size-XS" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-XS">XS</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.S" id="size-S" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-S">S</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.M" id="size-M" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-M">M</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.L" id="size-L" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-L">L</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.XL" id="size-XL" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-XL">XL</label>

                        </div>
                        <span class="text-danger ms-2" asp-validation-for="Size"></span>
                    </div>
                }
                 @if (Model.Product.ProductType is ProductType.DivingSuit)
                {
                    <div class="mb-4">
                        <h5>Vælg køn:</h5>
                        <div class="btn-group" role="group" aria-label="Valg af køn">

                            <input type="radio" class="btn-check" asp-for="Gender" value="@Gender.Herre" id="gender-Male" autocomplete="off">
                            <label class="btn btn-outline-primary" for="gender-Male">Mand</label>

                            <input type="radio" class="btn-check" asp-for="Gender" value="@Gender.Dame" id="gender-Female" autocomplete="off">
                            <label class="btn btn-outline-primary" for="gender-Female">Kvinde</label>

                            <span class="text-danger ms-2" asp-validation-for="Gender"></span>

                        </div>
                    </div>
                }
                @if (Model.Product.ProductType is ProductType.BCD)
                {
                    <div class="mb-4">
                        <h5>Vælg størrelse:</h5>
                        <div class="btn-group" role="group" aria-label="Valg af størrelse">

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.S" id="size-S" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-S">S</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.M" id="size-M" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-M">M</label>

                            <input type="radio" class="btn-check" asp-for="Size" value="@Size.L" id="size-L" autocomplete="off">
                            <label class="btn btn-outline-primary" for="size-L">L</label>

                        </div>
                        <span class="text-danger ms-2" asp-validation-for="Size"></span>
                    </div>
                }

                <div class="row g-3 mb-4">
                    <div class="col-md-6">
                        <label asp-for="StartDate" class="form-label">Startdato:</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-calendar-event"></i></span>
                            <input asp-for="StartDate" type="text" class="form-control" placeholder="Vælg startdato">
                        </div>
                        <span class="text-danger" asp-validation-for="StartDate"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="EndDate" class="form-label">Slutdato:</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-calendar-check"></i></span>
                            <input asp-for="EndDate" type="text" class="form-control" placeholder="Vælg slutdato">
                        </div>
                        <span class="text-danger" asp-validation-for="EndDate"></span>
                    </div>
                </div>

                @section Scripts {
                    <script>
                        const startInput = document.getElementById('StartDate');
                        const endInput = document.getElementById('EndDate');

                        const fpStart = flatpickr(startInput, {
                            dateFormat: "Y-m-d",
                            allowInput: true,
                            minDate: "today",
                            locale: flatpickr.l10ns.da,
                            onChange: (selectedDates) => {
                                if (selectedDates.length) {
                                    const d = new Date(selectedDates[0]);
                                    d.setDate(d.getDate() + 1);
                                    fpEnd.set('minDate', d);
                                    if (endInput.value && new Date(endInput.value) <= selectedDates[0]) {
                                        fpEnd.clear();
                                    }
                                }
                            }
                        });

                        const fpEnd = flatpickr(endInput, {
                            dateFormat: "Y-m-d",
                            allowInput: true,
                            locale: flatpickr.l10ns.da
                        });
                    </script>
                }

                @Html.AntiForgeryToken()
                <button class="btn btn-primary btn-lg mb-3 me-2"><i class="bi bi-cart-plus me-2"></i>Tilføj til kurv</button>
            </form>

            @*             
            <button class="btn btn-outline-secondary btn-lg mb-3">
                <i class="bi bi-heart"></i> Tilføj til ønskeliste
            </button> *@

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function changeImage(event, src) {
            document.getElementById('mainImage').src = src;
            document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
            event.target.classList.add('active');
        }
</script>
